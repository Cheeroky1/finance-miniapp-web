<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no,maximum-scale=1" />
  <title>Finance Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="topbar__title" id="topTitle">–ú–µ—Å—è—Ü</div>
      <div class="topbar__subtitle" id="topSubtitle"></div>
    </header>

    <main class="content" id="content">
      <section id="screen-month" class="screen active">
        <div class="card card--kpi">
          <div class="kpi">
            <div class="kpi__item">
              <div class="kpi__label">–î–æ—Ö–æ–¥</div>
              <div class="kpi__value" id="kpiIncome">0</div>
              <div class="kpi__sub">RUB</div>
            </div>
            <div class="kpi__item">
              <div class="kpi__label">–†–∞—Å—Ö–æ–¥</div>
              <div class="kpi__value" id="kpiExpense">0</div>
              <div class="kpi__sub">RUB</div>
            </div>
            <div class="kpi__item">
              <div class="kpi__label">–ë–∞–ª–∞–Ω—Å</div>
              <div class="kpi__value" id="kpiBalance">0</div>
              <div class="kpi__sub">RUB</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__head">
            <div>
              <div class="card__title">–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
              <div class="card__meta" id="monthMeta">‚Äî</div>
            </div>
            <button class="btn btn--ghost btn--sm" id="monthRefresh">–û–±–Ω–æ–≤–∏—Ç—å</button>
          </div>

          <div class="chart">
            <canvas id="pie" width="320" height="320" aria-label="–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞"></canvas>
          </div>

          <div id="monthInsight" class="insight" hidden></div>
          <div class="list" id="monthCats"></div>
        </div>

        <div class="card">
          <button class="collapse" id="piggyToggle" type="button">
            <div class="collapse__left">
              <div class="collapse__title">üê∑ –ö–æ–ø–∏–ª–∫–∞</div>
              <div class="collapse__meta" id="piggyMeta">–°–≤–µ—Ä–Ω—É—Ç–æ</div>
            </div>
            <div class="collapse__right">
              <span class="chev" id="piggyChev">‚åÑ</span>
            </div>
          </button>

          <div class="collapse__body" id="piggyBody" hidden>
            <div class="row row--between">
              <div class="muted">–¶–µ–ª–∏ –∏ –±–∞–ª–∞–Ω—Å</div>
              <button class="btn btn--ghost btn--sm" id="piggyAddGoal">+ –¶–µ–ª—å</button>
            </div>

            <div class="list" id="piggyGoals"></div>
            <div class="hint">–°–≤–∞–π–ø–Ω–∏ —Ü–µ–ª—å –≤–ª–µ–≤–æ, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å.</div>
          </div>
        </div>
      </section>

      <section id="screen-income" class="screen">
        <div class="card">
          <div class="card__title">‚ûï –î–æ—Ö–æ–¥</div>

          <label class="label">–°—É–º–º–∞ (RUB)</label>
          <input id="incomeAmount" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 90000">

          <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input id="incomeComment" class="input input--sm" type="text" maxlength="80" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∑–∞—Ä–ø–ª–∞—Ç–∞">

          <button id="incomeSave" class="btn btn--primary" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </section>

      <section id="screen-expense" class="screen">
        <div class="card">
          <div class="card__title">‚ûñ –†–∞—Å—Ö–æ–¥</div>

          <label class="label">–°—É–º–º–∞ (RUB)</label>
          <input id="expenseAmount" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 350">

          <label class="label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <select id="expenseCategory" class="input select"></select>

          <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input id="expenseComment" class="input input--sm" type="text" maxlength="80" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ç–∞–∫—Å–∏">

          <button id="expenseSave" class="btn btn--primary" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </section>

      <section id="screen-history" class="screen">
        <div class="card">
          <div class="card__head">
            <div>
              <div class="card__title">üìú –ò—Å—Ç–æ—Ä–∏—è</div>
              <div class="card__meta">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
            </div>
          </div>

          <div class="list" id="historyList"></div>
        </div>
      </section>
    </main>

    <nav class="tabbar" role="navigation" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
      <button class="tab active" data-tab="month" type="button">
        <div class="tab__icon">üìÖ</div>
        <div class="tab__label">–ú–µ—Å—è—Ü</div>
      </button>
      <button class="tab" data-tab="income" type="button">
        <div class="tab__icon">‚ûï</div>
        <div class="tab__label">–î–æ—Ö–æ–¥</div>
      </button>
      <button class="tab" data-tab="expense" type="button">
        <div class="tab__icon">‚ûñ</div>
        <div class="tab__label">–†–∞—Å—Ö–æ–¥</div>
      </button>
      <button class="tab" data-tab="history" type="button">
        <div class="tab__icon">üìú</div>
        <div class="tab__label">–ò—Å—Ç–æ—Ä–∏—è</div>
      </button>
    </nav>
  </div>

  <div id="toast" class="toast" aria-live="polite"></div>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal__card" role="dialog" aria-modal="true">
      <div class="modal__title" id="modalTitle"></div>
      <div class="modal__body" id="modalBody"></div>
      <div class="modal__actions" id="modalActions"></div>
    </div>
  </div>

  <div id="errBanner" class="err" hidden>
    <div class="err__title">–û—à–∏–±–∫–∞</div>
    <div class="err__text" id="errText"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
